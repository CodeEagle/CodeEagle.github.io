<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>macOS 多账户使用 GPG 的方法 · SelfStudio</title><meta name="description" content="macOS 多账户使用 GPG 的方法 - Lincoln.L"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon shortcut" href="/favicon.ico" type="image/x-icon"><link rel="mask-icon" sizes="any" href="/favicon.svg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://codeeagle.github.io/atom.xml" title="SelfStudio"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">macOS 多账户使用 GPG 的方法</h1><span class="post-info post-data-info">2018年9月17日</span><div class="post-content"><blockquote>
<p>一世流流长，边个会唔用到 github， gitlab 噶</p>
</blockquote>
<a id="more"></a>
<div class="toc">

<!-- toc -->
<ul>
<li><a href="#definition">Definition</a></li>
<li><a href="#intro">Intro</a></li>
<li><a href="#tool">Tool</a></li>
<li><a href="#configurations">Configurations</a></li>
<li><a href="#solution">Solution</a></li>
<li><a href="#end">End</a></li>
</ul>
<!-- tocstop -->
</div>

<h2><span id="definition">Definition</span><a href="#definition" class="header-anchor"></a></h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">GitAccount</span> </span>&#123;</span><br><span class="line">  <span class="keyword">case</span> gitLab(<span class="type">String</span>), gitHub(<span class="type">String</span>), bitBucket(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="intro">Intro</span><a href="#intro" class="header-anchor"></a></h2><p>由于在机器上，难免会遇到这个问题，公司的<code>GitAccount</code>和自己的<code>GitAccount</code>，在<code>SSH Key</code>与<code>GPG Key</code>配置时候的各种问题。</p>
<p>本篇文章不讨论同域多个名账户配置(没找到好方法)，即多个<code>GitAccount</code>共存时候<code>SSH</code>和<code>GPG</code>的配置。</p>
<h2><span id="tool">Tool</span><a href="#tool" class="header-anchor"></a></h2><p>你可以使用 <code>Terminal</code> 的 <code>GPG</code>，安装方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gpg</span><br></pre></td></tr></table></figure>
<p>或者使用 GUI 工具<a href="https://gpgtools.org/" target="_blank" rel="noopener">GPG-Suite</a></p>
<blockquote>
<p>使用此工具会异常方便，省去很多配置。。。</p>
</blockquote>
<p>生成 GPG Key 的步骤在此略过</p>
<h2><span id="configurations">Configurations</span><a href="#configurations" class="header-anchor"></a></h2><p>Google 了一下，如无意外 都是</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git config --global gpg.programe <span class="string">"gpg"</span></span><br><span class="line">git config --global commit.gpgsign <span class="string">"true"</span></span><br><span class="line">git config --global user.email <span class="string">"xx@xx.com"</span></span><br><span class="line">git config --global user.name <span class="string">"xxx"</span></span><br><span class="line">git config --global user.signingkey <span class="string">"xxxxxx"</span></span><br></pre></td></tr></table></figure>
<p>还有什么配置 GPG-Agent 的，hin 复杂。。。。(所以我选择 GPG-Suite)</p>
<p>这样配置的话会导致不用账户都用该配置，会导致 <code>commit</code> 失败。</p>
<h2><span id="solution">Solution</span><a href="#solution" class="header-anchor"></a></h2><p>其实可以这样，在<code>~/.gitconfig</code>里面配置一个全局的账户</p>
<p>然后某个 Repository 你是用别的账户的，就可以独自为该 Repo 配置一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git config gpg.programe <span class="string">"gpg"</span></span><br><span class="line">git config commit.gpgsign <span class="string">"true"</span></span><br><span class="line">git config user.email <span class="string">"xx@xx.com"</span></span><br><span class="line">git config user.name <span class="string">"xxx"</span></span><br><span class="line">git config user.signingkey <span class="string">"xxxxxx"</span></span><br></pre></td></tr></table></figure>
<p>就是把 Global 去掉。。。。。(哈哈哈，就是这么简单明了)</p>
<p>我们可以把这个整理成一个 <code>alias</code>，放在<code>~/.zshrc</code>里面，下次就直接输入就好了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> configgitrepo=<span class="string">"git config user.signingkey \"xxxxx\" &amp;&amp; git config user.email \"xx@xx.com\" &amp;&amp; git config user.name \"xxx\" &amp;&amp; git config gpg.programe \"gpg\" &amp;&amp; git config commit.gpgsign \"true\""</span></span><br></pre></td></tr></table></figure>
<h2><span id="end">End</span><a href="#end" class="header-anchor"></a></h2><p>权当记录一下，没啥技术含量</p>
</div></article></div></main><footer><div class="paginator"><a href="/2019/08/03/About-OpenWrt/" class="prev">上一篇</a><a href="/2018/08/01/Build-A-Generic-Streamer/" class="next">下一篇</a></div><div id="gitalk-container"></div><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>const gitalk = new Gitalk({
  clientID: 'c044c998fa94bffa71eb',
  clientSecret: '1eb2f5b6e9af8dbe0b2381a0c449dce57bb9e356',
  repo: 'Comments',
  owner: 'CodeEagle',
  admin: ['CodeEagle'],
  id: window.location.pathname,      // Ensure uniqueness and length less than 50
  distractionFreeMode: true  // Facebook-like distraction free mode
})
gitalk.render('gitalk-container')</script><div class="copyright"><p>© 2018 - 2020 <a href="https://codeeagle.github.io">Lincoln.L</a> Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">Apollo</a>.</p><a href="https://github.com/CodeEagle"><svg height="18" viewbox="0 0 16 16" width="18"><path fill="#aaa" fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a><span>&nbsp;&nbsp;&nbsp;<a href="https://twitter.com/_SelfStudio"><svg width="18" height="18" viewbox="0 0 250 250"><path d="M78.62,226.59 C172.96,226.59 224.56,148.43 224.56,80.65 C224.56,78.43 224.56,76.22 224.41,74.02 C234.448314,66.7591086 243.113555,57.768794 250,47.47 C240.638791,51.6180177 230.708293,54.3382865 220.54,55.54 C231.24744,49.1298206 239.261235,39.0477199 243.09,27.17 C233.021575,33.1445532 222.006461,37.3551202 210.52,39.62 C194.620828,22.7139428 169.357194,18.5761258 148.895493,29.5267993 C128.433792,40.4774727 117.86275,63.7932573 123.11,86.4 C81.8689574,84.3324954 43.4447578,64.8532327 17.4,32.81 C3.78622756,56.2464473 10.7398788,86.2285948 33.28,101.28 C25.117412,101.038075 17.1327937,98.8361318 10,94.86 C10,95.07 10,95.29 10,95.51 C10.0066813,119.92593 27.2175149,140.955352 51.15,145.79 C43.598696,147.8494 35.6758059,148.150443 27.99,146.67 C34.7094793,167.564228 53.9657456,181.877839 75.91,182.29 C57.7473504,196.564319 35.3105951,204.313277 12.21,204.29 C8.12903569,204.282165 4.05204065,204.035075 0,203.55 C23.4563595,218.602766 50.749134,226.587169 78.62,226.55" fill="#aaa" fill-rule="evenodd"></path></svg></a><span>&nbsp;&nbsp;&nbsp;</span><a href="/atom.xml"><svg height="18" viewbox="0 0 16 16" width="18"><path style="fill:#aaa;" d="M3.011,0.005C1.354,0.005,0,1.349,0,3.005c0,0.073,0.005,8.795,0.005,9c0,2.209,1.793,4,4.002,4            c0.184,0,8.908,0.001,9.003,0.001c1.655,0,3-1.346,3-3.001C16.011,5.826,10.191,0.005,3.011,0.005z M4.012,14.005            c-1.105,0.002-2.001-0.894-2.001-1.999c-0.002-1.105,0.894-2.001,2.001-2.001c1.105-0.002,2.001,0.894,1.999,2.001            C6.013,13.11,5.117,14.006,4.012,14.005z M8.511,14.005c-0.829,0-1.5-0.671-1.5-1.5c0-1.931-1.57-3.5-3.5-3.5            c-0.829,0-1.5-0.671-1.5-1.5s0.671-1.5,1.5-1.5c3.584,0,6.5,2.916,6.5,6.5C10.011,13.333,9.34,14.005,8.511,14.005z M12.511,14.005            c-0.829,0-1.5-0.671-1.5-1.5c0-4.136-3.364-7.5-7.5-7.5c-0.829,0-1.5-0.671-1.5-1.5s0.671-1.5,1.5-1.5c5.79,0,10.5,4.71,10.5,10.5            C14.011,13.333,13.34,14.005,12.511,14.005z"></path></svg></a></span></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-119557423-1",'auto');ga('send','pageview');</script></body></html>